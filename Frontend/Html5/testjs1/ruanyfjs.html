<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    var items = [1,2,3,4,5,6];
    var results = [];
    function series(item) {
        if (item) {
            async(item, function (result) {
               results.push(result);
                return series(items.shift());
            });
        } else  {
            return final(results);
        }
    }


    items.forEach(function (item) {
       async(item, function (result) {
         results.push(result);
           if (results.length == items.length) {
               final(results);
           }
       });
    });


    var items = [1,2,3,4,5,6];
    var results = [];
    var running = 0;
    var limit = 2;
    function launcher() {
        while (running < limit && items.length > 0) {
            var item = items.shift();
            async(item, function (result) {
               results.push(result);
                running--;
                if (items.length > 0) {
                    launcher();
                } else if (running == 0) {
                    final();
                }
            });
            running++;
        }
    }

    (new Promise(f1)).then(f2);


    (new Promise(step1))
            .then(step2)
            .then(step3)
            .then(step4);


//    return {
//      key : value
//    };

    var f = function f() {

    };

    if(!0) {
        var o = {};
    }

    var o;
    if (!o) {
        o = {};
    }

    function doAction(action) {
        var actions = {
            'hack': function () {
              return 'hack';
            },
            'slash': function () {
                return 'slash';
            },
            'run':function () {
                return 'run';
            }
        };

        if  (typeof  actions[action] !== 'function') {
            throw new Error('Invalid action.');
        }
        return actions[action]();
    }

    function myIsNaN(value) {
        return value !== value;
    }

    function myIsNaN() {
        return typeof value === 'number' && isNaN(value);
    }

    var o = {
        p : function (x) {
            return 2 * x;
        }
    };

    o.p(1);


    series(items.shift());

    function checkStorageSupport() {
        if (window.sessionStorage) {
            return true;
        } else  {
            return false;
        }

        if (window.localStorage) {
            return true;
        } else  {
            return false;
        }


    }

    window.addEventListener("storage",onStorageChange);


    function onStorageChange(e) {
        console.log(e.key);
    }

    if ('') {
        console.log(true);
    }
    //没有任何输出

    //需要特别注意的是，空数组（[]）和空对象（{}）对应的布尔值，都是true。
    if([]) {
        console.log(true);
    }

    if ({}) {
        console.log(true);
    }

    // undefined
    var i;
    i;
    function f(x) {
        return x;
    }
    f()

    var o = new Object();
    o.p

    function f() {

    }

    f()

    // undefined



    top:
            for (var i = 0; i < 3; i++) {
                for (var j = 0; j < 3; j++) {
                    if (i===1 && j === 1) break top;
                    console.log('i=' + i + ', j=' + j);
                }
            }
    function countdown(n) {
        while (n --> 0) console.log(n); //n-- > 0
    }
    countdown(3);


    var x = 1;
    switch (x) {
        case true:
            console.log('x发生类型装换');
        default:
            console.log('x没有发生类型转换');
    }


    var pricing = {
        'VIP': 0.50,
        'Preferred': 0.75,
        'Regular': 1.0
    };

    function getItempPricing(customer, item) {
        if (pricing[customer.type]) {
          return item.price * item.quantity * pricing[customer.type];
        }  else  {
            return item.price * item.quantity * pricing.Regular;
        }
    }


//    var even = (n % 2 === 0) ? true : false;


    var myVar;
    console.log(myVar ?
            'myVar has a value'
            : 'myVar do not has a value'
    );

//    var msg = 'The number' + n + ' is ' + ((n % 2 === 0) ? 'even': 'odd');

    var x = 3;
    for (var i = 0; i < x; i++) {
        console.log(i);
    }

    top:
    for (var i = 0; i < 3; i++) {
        for (var j = 0; j < 3; j++) {
            if (i===1 && j === 1) break top;
            console.log('i=' + i + ', j=' + j);
        }
    }
</script>
</body>
</html>