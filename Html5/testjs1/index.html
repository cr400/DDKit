<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>






//        var arr = ['A','B','C','D','E','F','G'];
//        var aCopy = arr.slice();
////        alert(arr);
////        alert(aCopy);
//
//        if (aCopy === arr) {
//            alert('xx');
//        }
//
//        var arr = ['A','B','C',1,2,3];
//        arr.join('-');
//        alert(arr);
//
//        var xiaoming = {
//            name: '小明',
//            birth: 1990,
//            school: 'No,1 Middle School',
//            height: 1.70,
//            weight: 65,
//            score:null
//        }
//        xiaoming.name;
//        xiaoming.birth;
//
//        'name' in xiaoming;
//        'grade' in xiaoming;
//
//        xiaoming.hasOwnProperty('name');
//        xiaoming.hasOwnProperty('toString');
//        var o = {
//          name: 'Jack',
//          age: 20,
//          city: 'Beijing'
//        };
//
//        for (var key in o){
//            if (o.hasOwnProperty(key)) {
//                alert(key);
//            }
//        }
//
//        var m = new Map();
//        m.set('Adam', 67);
//        m.set('Bob', 59);
//        m.has('Adam');
////        m.getItem()
//        var m = new Map();
//        m.set('Adam', 67);
//        m.set('Adam', 88);
////        m.get
//
//        var a = ['A','B','C'];
//        var s = new Set(['A','B','C']);
//        var m = new Map([[1,'x'],[2,'y'],[3,'z']]);
//
//
//        for (var x of a){ //遍历Array
//            alert(x);
//        }
//
//        for (var x of s){ //遍历Set
//            alert(x);
//        }
//
//        for (var x of m){ //遍历Map
//            alert(x[0] + '=' + x[1]);
//        }


//var d = ['A','B','C'];
//d.name = 'Hello';
//for (var x in d) {
//    alert(x);
//}

//        var a = ['A','B','C'];
//        a.forEach(function (element, index, array) {
////            alert(element);
//        })
//
//        var s = new Set(['A','B','C']);
//        s.forEach(function (element, sameElement, set) {
////             alert(sameElement)
//        })
//
//        var m = new Map([[1,'X'],[2,'y'],[3,'z']]);
//        m.forEach(function (value, key, map) {
//            alert(value);
//        })
//
//        var a = ['A','B','C'];
//        a.forEach(function (element) {
//            alert(element);
//        })
//
//        var abs = function (x) {
//            if (x >= 0){
//                return x;
//            } else {
//                return -x;
//            }
//        }
//
//        abs(-9,'haha','hehe',null);
//        console.log(abs(10));
//        console.log(abs(-9));
//        console.log((abs(10, 'blablabla')));
//
//
//        console.log(abs());
//
//        function abs(x) {
//            if (typeof  x !== 'number') {
//                throw 'Not a number'
//            }
//            if (x >= 0) {
//                return x;
//            } else  {
//                return -x;
//            }
//        }


//        function foo(x) {
//            alert(x);
//            for (var i=0; i<arguments.length; i++) {
//                alert(arguments[i]);
//            }
//        }
//        foo(10,20,30);

//        function abs() {
//            if (arguments.length === 0) {
//                return 0;
//            }
//            var x = arguments[0];
//            return x>= 0 ?x:-x;
//        }
//
//        console.log(abs());
//        console.log(abs(10));
//        console.log(abs(-9));


//        function foo(a ,b ,c) {
//            if (arguments.length === 2) {
//                //实际拿到的参数是a和b,c为undefined
//                c = b;     //把b赋值给c
//                b = null;  //b变为默认值
//            }
//        }
//
//        function foo(a,b) {
//            var i, rest = [];
//            if (arguments.length > 2) {
//                for (i = 2; i < arguments.length; i++) {
//                    rest.push(arguments[i]);
//                }
//            }
//        }
//
//        function foo(a,b, ...rest) {
//            console.log('a = ' + a);
//            console.log('b = ' + b);
//            console.log(rest);
//        }
//
//        foo(1,2,3,4,5);
//        foo(1);
//
//
//        function foo() {
//            var y;
//            var x = 'Hello,' + y;
//            alert(x);
//            y = 'Bob';
//        }
//
//       var course = 'Learn JavaScript';
//        alert(course);
//        alert(window.console);
//
//        function foo() {
//            alert('foo');
//        }
//        foo();
//        window.foo();
//        window.alert('调用window.alert()');
//        var old_alert = window.alert;
//        window.alert = function () {
//
//        }
//        window.alert = old_alert;
//        alert('又可以用alert()了');
//        //唯一的全局变量
//        var MYAPP = {};
//
//        //其他变量
//        MYAPP.name = 'myapp';
//        MYAPP.version = 1.0;
//
//        MYAPP.foo = function () {
//            return 'foo';
//        }
//
//        function foo1() {
//            for(var i = 0;i<100;i++) {
//
//            }
//            i += 100;
//            alert(i);
//        }
//        foo1();
//        function foo() {
//            for (let i=0; i<100; i++) {
//
//            }
////            i += 1;
////            alert(i);
//        }
//        foo();

//        var PI = 3.14;
//        const PI = 3.14;
//        PI = 3;
//        PI;

//        var xiaoming = {
//            name : '小明',
//            birth:1990
//        }
//
//        var xiaoming = {
//            name: '小明',
//            birth: 1990,
//            age: function () {
//                var y = new Date().getFullYear();
//                return y - this.birth;
//            }
//        }
//
//       console.log(xiaoming.age());
//       console.log(xiaoming.age());
//
//
//        function getAge() {
//            var y = new Date().getFullYear();
//            return y - this.birth;
//        }
//
//        var xiaoming = {
//            name: '小明',
//            birth: 1990,
//            age: getAge
//        }
//
//        console.log(xiaoming.age());
//        getAge();
//
//        var fn = xiaoming.age;
//        fn();
//
//        var xiaoming = {
//            name: '小明',
//            birth: 1990,
//            age: function () {
//                var that = this;  //在方法内部以开放就捕获this
//                function getAgeFromBirth() {
//                    var y = new Date().getFullYear();
//                    return y - that.birth; //用that而不是this
//                }
//                return getAgeFromBirth();
//            }
//        }
//        console.log(xiaoming.age);
//
//        function getAge() {
//            var y = new Date().getFullYear();
//            return y - this.birth;
//        }
//
//        var xiaoming = {
//            name: '小明',
//            birth: 1990,
//            age: getAge
//        };
//
//        xiaoming.age();
//        getAge.apply(xiaoming,[]);

       console.log(Math.max.apply(null,[3,5,4]));
       console.log( Math.max.call(null,3,5,4));

        var count = 0;
        var oldParseInt = parseInt; //保存原函数


        window.parseInt = function () {
            count += 1;
            return oldParseInt.apply(null,arguments);
        };

        //测试:
        parseInt('10');
        parseInt('20');
        parseInt('30');
        console.log(count);

        function add(x, y, f) {
            return f(x) + f(y);
        }
       console.log(add(-5, 6, Math.abs));

        function pow(x) {
            return x * x;
        }
        var arr = [1,2,3,4,5,6,7,8,9];
        arr.map(pow);


        var arr = [1,2,3,4,5,6,7,8,9];
       var s =  arr.map(String);
        console.log(s);

        var arr = [1,3,5,7,9];
        arr.reduce(function (x,y) {
            return x+y;
        });

        var arr = [1,3,5,7,9];
        arr.reduce(function (x,y) {
            return x * 10 + y;
        });

        var arr = [1, 2, 4, 5, 6, 9, 10, 15];
        var r = arr.filter(function (x) {
           return x % 2 !== 0;
        });
        console.log(r);

        var arr = ['A','','B',null,undefined,'C','  '];
        var r = arr.filter(function (s) {
           return s && s.trim(); // 注意:IE9以下版本没有trim方法
        });
        console.log(r);

function get_primes(arr) {
    return[];
}
var
        x,
        r,
        arr = [];
for (x = 1; x < 100; x++) {
    arr.push(x);
}
r = get_primes(arr);
console.log(r);
if (r.toString() === [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97].toString()) {
    alert('测试通过!');
} else {
    alert('测试失败: ' + r.toString());
}

        ['Google','Apple','Microsoft'].sort();
        var arr = [10,20,1,2];
        arr.sort(function (x,y) {
           if (x < y) {
               return -1;
           }
           if (x > y) {
               return 1;
           }
            return 0;
        });
        console.log(arr);

        var arr = [10,20,1,2];
        arr.sort(function (x,y) {
            if (x < y) {
                return 1;
            }
            if (x > y) {
                return -1;
            }
            return 0;
        });
        var arr = ['Google','apple','Microsoft'];
        arr.sort(function (s1, s2) {
           x1 = s1.toUpperCase();
           x2 = s2.toUpperCase();
            if (x1 < x2) {
                return -1;
            }
            if (x1 > x2) {
                return 1;
            }
            return 0;
        });
        var a1 = ['B','A','C'];
        var a2 = a1.sort();
        if (a1 === a2) {
            console.log('a1=a2');
        }

        function sum(arr) {
            return arr.reduce(function (x,y) {
                return x + y;
            });
        }
        console.log(sum([1,2,3,4,5]));

        function lazy_sum(arr) {
            var sum = function () {
                return arr.reduce(function (x,y) {
                    return x + y;
                });
            }
            return sum;
        }

        var f = lazy_sum([1,2,3,4,5]);

        console.log(f());

        var f1 = lazy_sum([1,2,3,4,5]);
        var f2 = lazy_sum([1,2,3,4,5]);

        if (f1 === f2) {
          console.log('f1=f2')
        }

        function count1() {
            var arr = [];
            for (var i = 1; i<=3; i++) {
                arr.push(function () {
                   return i * i;
                });
            }
            return arr;
        }
        var results = count1();
        var f1 = results[0];
        var f2 = results[1];
        var f3 = results[2];

       console.log(f1());
       console.log(f2());
       console.log(f3());
        //返回闭包时牢记的一点就是：返回函数不要引用任何循环变量，或者后续会发生变化的变量。

        function count2() {
            var arr = [];
            for (var i=1;i<=3;i++) {
                arr.push((function (n) {
                  return function () {
                      return n * n;
                  }
                })(i));
            }
            return arr;
        }

        var results = count2();
        var f11 = results[0];
        var f22 = results[1];
        var f33 = results[2];

       console.log(f11());
        console.log(f22());
        console.log(f33());
        
        
        function create_counter(initial) {
            var x = initial || 0;
            return {
                inc: function () {
                    x += 1;
                    return x;
                }
            }
        }

        var c1 = create_counter();
       console.log(c1.inc());
       console.log(c1.inc());
       console.log(c1.inc());

        var c2 = create_counter(10);
        console.log(c2.inc());
        console.log(c2.inc());
        console.log(c2.inc());

        function make_pow(n) {
            return function (x) {
                return Math.pow(x,n);
            }
        }

        //创建两个新函数:
        var pow2 = make_pow(2);
        var pow3 = make_pow(3);

        console.log(pow2(5));
        console.log(pow3(7));

//        var obj = {
//          birth: 1990,
//            getAge: function () {
//                var b = this.birth;
//                var fn = function () {
//                    return new Date.getFullYear() - this.birth; // this 指向window或undefined
//                };
//                return fn();
//            }
//        };
//
//        console.log(obj.getAge());

        var obj = {
          birth: 1990,
            getAge: function () {
                var b = this.birth;
                var fn = () => new Date().getFullYear() - this.birth; // this 指向obj对象
                return fn();
            }
        };

       console.log(obj.getAge());

//        //两个参数:
//        (x,y) => x * x + y * y
//
//        //无参数:
//        () => 3.14
//
//        //可变参数:
//(x,y, ) => {
//    var i, sum = x + y;
//    for (i=0; i< rest.length,)
//}


        function fib(max) {
            var
               t,
                    a = 0,
                    b = 1,
                    arr = [0,1];
            while (arr.length < max) {
                t = a + b;
                a = b;
                b = t;
                arr.push(t);
            }
            return arr;
        }

        console.log(fib(5));
        console.log((fib(10)));

        function* fib(max) {
            var
                    t,
                    a = 0,
                    b = 1,
                    n = 1;
            while (n < max) {
                yield a;
                t = a + b;
                a = b;
                b = t;
                n ++;
            }
            return a;
        }

//        var f = fib(5);
//        console.log(f.next());
//        console.log(f.next());
//        console.log(f.next());
//        console.log(f.next());
//        console.log(f.next());

        for (var x of fib(5)) {
            console.log(x);
        }


        var n = new Number(123);
        var b = new Boolean(true);
        var s = new String('str');

var xiaoming = {
    name: '项目',
    age:14,
    gender:true,
    height:1.65,
    grade:null,
    'middle-school': '\"W3C\" Middle School',
    skills: ['JavaScript','Java','Python','Lisp']
}
        console.log(JSON.stringify(xiaoming));
        console.log(JSON.stringify(xiaoming,null, '   '));
        console.log(JSON.stringify(xiaoming,['name','skills','  ']));

        function convert(key,value) {
            if (typeof value === 'string') {
                return value.toUpperCase();
            }
            return value;
        }
        console.log(JSON.stringify(xiaoming,convert,'   '));
        
        
        var xiaoming = {
            name: '小明',
            age :14,
            gender: true,
            height: 1.65,
            grade:null,
            'middle-school':'\"W3C" Middle School',
            skill:['JavaScript','Java','Python','Lisp'],
            toJSON:function () {
                return {
                  'Name':this.name,
                    'Age':this.age
                };
            }
        }
        console.log(JSON.stringify(xiaoming));
    </script>
</head>
<body>

</body>
</html>